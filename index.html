<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Для тебя ❤️</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Marck+Script&display=swap" rel="stylesheet">

  <meta name="theme-color" content="#0b0b12" />

  <style>
    :root{
      --text: rgba(255,255,255,.96);
      --muted: rgba(255,255,255,.78);
      --border: rgba(255,255,255,.18);
      --shadow: 0 24px 80px rgba(0,0,0,.55);
      --r: 22px;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:#0b0b12;
      overflow-x:hidden;
    }

    /* ===== ФОН С ФОТО (БЕЗ BLUR) ===== */
    .bg{
      position:fixed;
      inset:0;
      z-index:-3;
      background:#0b0b12;
    }
    .slide{
      position:absolute;
      inset:0;
      background-size:cover;
      background-position:center;
      opacity:0;
      transition:opacity 1.6s ease;
      z-index:1;
    }
    .slide.active{ opacity:1; }

    /* затемнение + виньетка (для читаемости, без размытия) */
    .bg::after{
      content:"";
      position:absolute;
      inset:0;
      z-index:2;
      pointer-events:none;
      background:
        radial-gradient(1200px 700px at 50% 18%, rgba(0,0,0,.10), rgba(0,0,0,.35) 55%, rgba(0,0,0,.65) 100%),
        linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.72));
    }

    /* ===== ЗВЁЗДЫ ===== */
    #stars{
      position:fixed;
      inset:0;
      z-index:-2;
      pointer-events:none;
      opacity:.75; /* не перебиваем фото */
    }

    /* ===== КАРТОЧКА (БЕЗ backdrop-filter/blur) ===== */
    .wrap{
      min-height:100%;
      display:grid;
      place-items:start center;
      padding:22px 16px 44px;
    }
    .paper{
      width:min(760px,100%);
      border-radius:var(--r);
      border:1px solid var(--border);
      background:rgba(0,0,0,.46); /* вместо blur — просто стекло */
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .topbar{
      padding:14px 16px;
      display:flex;
      justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.40);
    }
    .chip{
      padding:8px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);
      font-size:12.5px;
      color:rgba(255,255,255,.85);
    }

    .content{ padding:20px; }

    .title{
      font-family:"Marck Script",cursive;
      font-size:clamp(30px,5vw,46px);
      margin:6px 0 12px;
      opacity:0;
      transform:translateY(14px);
      transition:opacity 1s ease, transform 1s ease;
    }
    .title.show{ opacity:1; transform:none; }

    /* Появление строк БЕЗ blur */
    .line{
      font-size:16px;
      line-height:1.75;
      font-weight:300;
      margin:0;
      opacity:0;
      transform:translateY(10px);
      transition:opacity 1.05s ease, transform 1.05s ease;
      text-shadow: 0 2px 18px rgba(0,0,0,.55); /* читаемость на фото */
    }
    .line.show{ opacity:1; transform:none; }

    .spacer{ height:12px; }

    .separator{
      height:1px;
      background:rgba(255,255,255,.18);
      margin:20px 0;
      opacity:0;
      transition:opacity 1s ease;
    }
    .separator.show{ opacity:1; }

    .cta{
      border:1px solid rgba(255,255,255,.22);
      border-radius:18px;
      padding:16px;
      background:rgba(0,0,0,.38);
      opacity:0;
      transform:translateY(14px);
      transition:opacity 1s ease, transform 1s ease;
    }
    .cta.show{ opacity:1; transform:none; }

    .ctaTitle{ font-weight:700; }
    .ctaHint{
      font-size:12.8px;
      color:rgba(255,255,255,.74);
      margin-top:6px;
      line-height:1.35;
      text-shadow: 0 2px 18px rgba(0,0,0,.55);
    }

    .btn{
      margin-top:14px;
      width:100%;
      border:0;
      border-radius:16px;
      padding:14px;
      font-size:16px;
      font-weight:800;
      background:rgba(255,255,255,.95);
      color:#0b0b12;
      cursor:pointer;
      box-shadow:0 14px 34px rgba(0,0,0,.35);
      position:relative;
    }

    @keyframes glow{
      0%,100%{ box-shadow:0 14px 34px rgba(0,0,0,.35),0 0 0 rgba(255,255,255,0); transform:translateY(0); }
      50%{ box-shadow:0 18px 44px rgba(0,0,0,.45),0 0 28px rgba(255,255,255,.55); transform:translateY(-1px); }
    }
    .btn.invite{ animation:glow 3.5s ease-in-out infinite; }

    .footer{
      text-align:center;
      font-size:12.5px;
      color:rgba(255,255,255,.62);
      padding:14px;
      opacity:0;
      transition:opacity 1s ease;
      text-shadow: 0 2px 18px rgba(0,0,0,.55);
    }
    .footer.show{ opacity:1; }
  </style>
</head>

<body>
  <div class="bg">
    <div class="slide active" id="slideA"></div>
    <div class="slide" id="slideB"></div>
  </div>

  <canvas id="stars"></canvas>

  <div class="wrap">
    <div class="paper">
      <div class="topbar">
        <div class="chip">Для тебя</div>
        <div class="chip">❤️</div>
      </div>

      <div class="content">
        <div class="title" id="title">Любимая…</div>

        <!-- ГОТОВЫЙ ТЕКСТ -->
        <p class="line">Я долго думал, как сказать это так, чтобы не громко,</p>
        <p class="line">не напоказ, а по-настоящему.</p>
        <div class="spacer"></div>

        <p class="line">Ты — самое лучшее, что со мной произошло.</p>
        <p class="line">С тобой мир стал спокойнее, а я — счастливее.</p>
        <div class="spacer"></div>

        <p class="line">Мне нравится просыпаться с мыслью о тебе.</p>
        <p class="line">Нравится, что рядом с тобой можно быть собой.</p>
        <div class="spacer"></div>

        <p class="line">Я не обещаю идеальности.</p>
        <p class="line">Но обещаю выбирать тебя снова и снова.</p>
        <div class="spacer"></div>

        <p class="line">Я хочу сохранить этот момент.</p>
        <p class="line">И очень хочу, чтобы ты увидела один кадр…</p>
        <p class="line">Именно с него.</p>

        <div class="separator" id="sep"></div>

        <div class="cta" id="cta">
          <div class="ctaTitle">Тот самый момент — 1:23:08</div>
          <div class="ctaHint">
            Нажми кнопку — откроется фильм.<br>
            Если начнётся с начала — просто перемотай на <b>1:23:08</b>.
          </div>
          <button class="btn" id="playBtn">Открыть фильм</button>
        </div>
      </div>

      <div class="footer" id="footer">
        Это маленькое признание — от меня к тебе ❤️
      </div>
    </div>
  </div>

  <script>
    const startTime = 4988;
    const filmUrl = `https://www.kinopoisk.vip/film/5265603/?t=${startTime}&start=${startTime}#t=${startTime}`;

    /* ===== ФОТО (лежат в корне репозитория) ===== */
    const photos = [
      "1.jpg",
      "2.jpg",
      "3.jpg"
    ];

    const slideA = document.getElementById("slideA");
    const slideB = document.getElementById("slideB");
    let idx = 0, showA = true;

    function setBg(el, src){ el.style.backgroundImage = `url('${src}')`; }
    setBg(slideA, photos[0]);
    setBg(slideB, photos[1] || photos[0]);

    setInterval(()=>{
      if(photos.length < 2) return;
      idx = (idx+1)%photos.length;
      const incoming = showA ? slideB : slideA;
      const outgoing = showA ? slideA : slideB;
      setBg(incoming, photos[idx]);
      incoming.classList.add("active");
      outgoing.classList.remove("active");
      showA = !showA;
    }, 7000);

    /* ===== ПОЯВЛЕНИЕ ТЕКСТА ПО СТРОКАМ ===== */
    const title = document.getElementById("title");
    const lines = document.querySelectorAll(".line");
    const sep = document.getElementById("sep");
    const cta = document.getElementById("cta");
    const footer = document.getElementById("footer");

    setTimeout(()=>title.classList.add("show"), 280);
    lines.forEach((l,i)=>setTimeout(()=>l.classList.add("show"), 700 + i*220));

    const endTime = 700 + lines.length*220 + 420;
    setTimeout(()=>sep.classList.add("show"), endTime);
    setTimeout(()=>cta.classList.add("show"), endTime+220);
    setTimeout(()=>{
      footer.classList.add("show");
      document.getElementById("playBtn").classList.add("invite");
    }, endTime+650);

    document.getElementById("playBtn").onclick = () => window.open(filmUrl,"_blank");

    /* ===== ЗВЁЗДЫ (не мешают фото) ===== */
    const c = document.getElementById("stars");
    const ctx = c.getContext("2d");
    function resize(){ c.width = innerWidth; c.height = innerHeight; }
    resize(); addEventListener("resize", resize);

    const stars = Array.from({length: 130}, () => ({
      x: Math.random()*innerWidth,
      y: Math.random()*innerHeight,
      r: 0.6 + Math.random()*1.7,
      a: Math.random(),
      vx: (-0.5 + Math.random())*0.08,
      vy: (-0.5 + Math.random())*0.10,
      t: Math.random()*Math.PI*2
    }));

    function draw(){
      ctx.clearRect(0,0,c.width,c.height);
      for(const s of stars){
        s.t += 0.01;
        s.x += s.vx; s.y += s.vy;
        if(s.x < -10) s.x = innerWidth+10;
        if(s.x > innerWidth+10) s.x = -10;
        if(s.y < -10) s.y = innerHeight+10;
        if(s.y > innerHeight+10) s.y = -10;

        const tw = (Math.sin(s.t)+1)*0.5; // 0..1
        const alpha = 0.18 + tw*0.35;

        ctx.fillStyle = `rgba(255,255,255,${alpha})`;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r*(0.85+tw*0.35), 0, Math.PI*2);
        ctx.fill();
      }
      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
